name: Release

on:
  push:
    tags:
      - 'v*'

permissions:
  contents: write

jobs:
  release:
    uses: Truthdb/.github/.github/workflows/rust-release.yml@workflows-v1
    with:
      binary_name: truthdb-installer
      install_packages: musl-tools
      cargo_target: x86_64-unknown-linux-musl
      artifact_target_name: x86_64-linux-musl
      extra_body: |
        ### Installation

        Download the `truthdb-installer` binary for your platform and verify the checksum.

        ### Usage

        This installer is designed to run in an initramfs environment. See README.md for details.
